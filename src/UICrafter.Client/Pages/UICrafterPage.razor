@page "/uicrafter"
@attribute [Authorize]

<MudStack Row="true" @onclick="() => {SelectedComponent = null;}">
    <!-- Left section: Component Grid (20%) -->
    <ComponentGrid @bind-SelectedComponent="@SelectedComponent" @bind-DropContainer="@DropContainer" UIComponents="@UIComponentList.UIComponents" />

    <!-- Center section: Dropzone (55%) -->
    <MudStack Style="width: 55%;" Class="align-center">
        <MudText>App-view:</MudText>

        <AppViewDesigner @bind-SelectedComponent="@SelectedComponent" @bind-DropContainer="@DropContainer" UIComponents="@UIComponentList.UIComponents" />

        <AppViewButtons @bind-SelectedComponent="@SelectedComponent" @bind-DropContainer="@DropContainer" UIComponentList="@UIComponentList" />
    </MudStack>

    <!-- Right section: Component Properties (25%) -->
    <MudStack Style="width: 25%;" @onclick:stopPropagation>
        <MudText>Properties:</MudText>
        @if (SelectedComponent is not null)
        {
            <ComponentProperties @bind-SelectedComponent="@SelectedComponent" @bind-DropContainer="@DropContainer" UIComponents="@UIComponentList.UIComponents" />
        }
        else
        {
            <MudText>AppView properties and buttons</MudText>
            @* <AppViewButtons @bind-SelectedComponent="@SelectedComponent" @bind-DropContainer="@DropContainer" UIComponentList="@UIComponentList" /> *@
        }
    </MudStack>
</MudStack>


@code {
    private UIComponent? SelectedComponent { get; set; }
    private MudDropContainer<UIComponent>? DropContainer { get; set; }
    private UIComponentList UIComponentList { get; set; } = new UIComponentList();
}

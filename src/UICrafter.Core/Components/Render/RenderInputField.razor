@inherits BaseInput

@{
    base.BuildRenderTree(__builder);
}

@code {
    [Parameter]
    public required UIComponent InputField { get; set; }

    [CascadingParameter]
    public required JsonPublisher JSONPublisher { get; set; }

    [CascadingParameter]
    public required InputFieldPublisher inputFieldPublisher { get; set; }

    protected override void OnInitialized()
    {
        Label = InputField.InputField.Label;
        Value = InputField.InputField.Value;
        LogicalName = InputField.InputField.LogicalName;

        Log.Information($"InputField: {Label} - {Value} - {LogicalName}");
    }

    protected override void OnChange()
    {
        Log.Information("Changed Input field");
        Value = Value?.ToString() ?? "";
        inputFieldPublisher.NotifySubscribers(InputField.InputField.LogicalName, Value);
    }
}

